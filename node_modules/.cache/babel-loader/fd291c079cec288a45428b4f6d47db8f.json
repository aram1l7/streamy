{"ast":null,"code":"var _jsxFileName = \"/home/aram/Programming/streams/client/src/components/Oauth.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { signIn, signOut } from \"../store/actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Oauth extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.onAuthChange = isSignedIn => {\n      if (isSignedIn) {\n        this.props.startSignIn(this.auth.currentUser.get().getId());\n      } else {\n        this.props.startSignOut();\n      }\n    };\n\n    this.handleSignInClick = () => {\n      this.auth.signIn();\n    };\n\n    this.handleSignOutClick = () => {\n      this.auth.signOut();\n    };\n\n    this.renderAuthButton = () => {\n      if (this.props.isSignedIn === null) {\n        return null;\n      }\n\n      if (this.props.isSignedIn === false) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ui blue google button\",\n          onClick: this.handleSignInClick,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"google icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 11\n          }, this), \"Sign In\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ui red google button\",\n          onClick: this.handleSignOutClick,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"google icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 11\n          }, this), \"Sign out\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }, this);\n      }\n    };\n  }\n\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client.init({\n        clientId: process.env.REACT_APP_GOOGLE_OAUTH_CLIENT_ID,\n        scope: \"email\"\n      }).then(() => {\n        this.auth = window.gapi.auth2.getAuthInstance();\n        this.onAuthChange(this.auth.isSignedIn.get());\n        this.auth.isSignedIn.listen(this.onAuthChange);\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.renderAuthButton()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isSignedIn: state.auth.isSignedIn,\n    userId: state.auth.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    startSignIn: id => dispatch(signIn(id)),\n    startSignOut: () => dispatch(signOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Oauth);","map":{"version":3,"sources":["/home/aram/Programming/streams/client/src/components/Oauth.js"],"names":["React","Component","connect","signIn","signOut","Oauth","onAuthChange","isSignedIn","props","startSignIn","auth","currentUser","get","getId","startSignOut","handleSignInClick","handleSignOutClick","renderAuthButton","componentDidMount","window","gapi","load","client","init","clientId","process","env","REACT_APP_GOOGLE_OAUTH_CLIENT_ID","scope","then","auth2","getAuthInstance","listen","render","mapStateToProps","state","userId","mapDispatchToProps","dispatch","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { signIn, signOut } from \"../store/actions\";\nclass Oauth extends Component {\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId: process.env.REACT_APP_GOOGLE_OAUTH_CLIENT_ID,\n          scope: \"email\",\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthChange(this.auth.isSignedIn.get());\n          this.auth.isSignedIn.listen(this.onAuthChange);\n        });\n    });\n  }\n  onAuthChange = (isSignedIn) => {\n    if (isSignedIn) {\n      this.props.startSignIn(this.auth.currentUser.get().getId());\n    } else {\n      this.props.startSignOut();\n    }\n  };\n  handleSignInClick = () => {\n    this.auth.signIn();\n  };\n  handleSignOutClick = () => {\n    this.auth.signOut();\n  };\n\n  renderAuthButton = () => {\n    if (this.props.isSignedIn === null) {\n      return null;\n    }\n    if (this.props.isSignedIn === false) {\n      return (\n        <button\n          className=\"ui blue google button\"\n          onClick={this.handleSignInClick}\n        >\n          <i className=\"google icon\" />\n          Sign In\n        </button>\n      );\n    } else {\n      return (\n        <button\n          className=\"ui red google button\"\n          onClick={this.handleSignOutClick}\n        >\n          <i className=\"google icon\" />\n          Sign out\n        </button>\n      );\n    }\n  };\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isSignedIn: state.auth.isSignedIn,\n    userId:state.auth.userId\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startSignIn: (id) => dispatch(signIn(id)),\n    startSignOut: () => dispatch(signOut()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Oauth);\n"]},"metadata":{},"sourceType":"module"}